<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>AI Briefing</h1>
    <div>
        <input id="code" value="2330" />
        <button id="btn">Fetch</button>
    </div>
    <pre id="out">loading..</pre>
<script>
    async function fetchBriefing(code) {
        const res = await fetch(`http://127.0.0.1:8000/api/ai-briefing/${code}`);
        return await res.json();
    }
    
    async function run() {
        const code = document.getElementById("code").value.trim();
        const out = document.getElementById("out");
        out.textContent = "Loading...";

        try {
            const data = await fetchBriefing(code);
            out.textContent = JSON.stringify(data, null, 2);
        } catch (e) {
            out.textContent = String(e);
        }

    }
    document.getElementById("btn").addEventListener("click", run);
    run();

</script>
</body>
</html>